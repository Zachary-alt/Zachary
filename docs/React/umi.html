<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>èµ·æ­¥ | Zachary</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="å‰ç«¯å­¦ä¹ ç¬”è®°">
    
    <link rel="preload" href="/Zachary/assets/css/0.styles.c575f4e7.css" as="style"><link rel="preload" href="/Zachary/assets/js/app.2a4c88dc.js" as="script"><link rel="preload" href="/Zachary/assets/js/2.10e03947.js" as="script"><link rel="preload" href="/Zachary/assets/js/21.c8401ded.js" as="script"><link rel="prefetch" href="/Zachary/assets/js/10.779acdb7.js"><link rel="prefetch" href="/Zachary/assets/js/11.6bd064c4.js"><link rel="prefetch" href="/Zachary/assets/js/12.0be48cc2.js"><link rel="prefetch" href="/Zachary/assets/js/13.dc0644fb.js"><link rel="prefetch" href="/Zachary/assets/js/14.0c158d85.js"><link rel="prefetch" href="/Zachary/assets/js/15.5a57096f.js"><link rel="prefetch" href="/Zachary/assets/js/16.4596287d.js"><link rel="prefetch" href="/Zachary/assets/js/17.d4a6e350.js"><link rel="prefetch" href="/Zachary/assets/js/18.c71618d7.js"><link rel="prefetch" href="/Zachary/assets/js/19.d5832c35.js"><link rel="prefetch" href="/Zachary/assets/js/20.61a4ed93.js"><link rel="prefetch" href="/Zachary/assets/js/22.cf511790.js"><link rel="prefetch" href="/Zachary/assets/js/23.895fe62d.js"><link rel="prefetch" href="/Zachary/assets/js/24.770aaf7a.js"><link rel="prefetch" href="/Zachary/assets/js/25.61aa98ef.js"><link rel="prefetch" href="/Zachary/assets/js/26.2485c183.js"><link rel="prefetch" href="/Zachary/assets/js/27.3958464f.js"><link rel="prefetch" href="/Zachary/assets/js/28.e486e261.js"><link rel="prefetch" href="/Zachary/assets/js/29.67aed707.js"><link rel="prefetch" href="/Zachary/assets/js/3.d2f8866f.js"><link rel="prefetch" href="/Zachary/assets/js/30.d9e862ce.js"><link rel="prefetch" href="/Zachary/assets/js/31.3eae918e.js"><link rel="prefetch" href="/Zachary/assets/js/32.cef07f02.js"><link rel="prefetch" href="/Zachary/assets/js/33.f44ca488.js"><link rel="prefetch" href="/Zachary/assets/js/34.4969bc3d.js"><link rel="prefetch" href="/Zachary/assets/js/35.1fbb654a.js"><link rel="prefetch" href="/Zachary/assets/js/36.b722a7c3.js"><link rel="prefetch" href="/Zachary/assets/js/37.ca40fe59.js"><link rel="prefetch" href="/Zachary/assets/js/38.e2820148.js"><link rel="prefetch" href="/Zachary/assets/js/39.4ca428cd.js"><link rel="prefetch" href="/Zachary/assets/js/4.fde445f1.js"><link rel="prefetch" href="/Zachary/assets/js/40.a753ed1d.js"><link rel="prefetch" href="/Zachary/assets/js/41.7cddbfa2.js"><link rel="prefetch" href="/Zachary/assets/js/42.e1ed73d2.js"><link rel="prefetch" href="/Zachary/assets/js/43.4d475cb3.js"><link rel="prefetch" href="/Zachary/assets/js/44.54f5c580.js"><link rel="prefetch" href="/Zachary/assets/js/45.3ff513b5.js"><link rel="prefetch" href="/Zachary/assets/js/46.ca8c6704.js"><link rel="prefetch" href="/Zachary/assets/js/47.f7e61527.js"><link rel="prefetch" href="/Zachary/assets/js/48.72f8d2e4.js"><link rel="prefetch" href="/Zachary/assets/js/49.5407fca7.js"><link rel="prefetch" href="/Zachary/assets/js/5.dfe6aeb3.js"><link rel="prefetch" href="/Zachary/assets/js/50.7062dad9.js"><link rel="prefetch" href="/Zachary/assets/js/51.2d71d4dc.js"><link rel="prefetch" href="/Zachary/assets/js/52.776d8d5e.js"><link rel="prefetch" href="/Zachary/assets/js/53.ea2419cb.js"><link rel="prefetch" href="/Zachary/assets/js/54.11c59038.js"><link rel="prefetch" href="/Zachary/assets/js/55.c3af088e.js"><link rel="prefetch" href="/Zachary/assets/js/56.a0173fcd.js"><link rel="prefetch" href="/Zachary/assets/js/57.982c6b09.js"><link rel="prefetch" href="/Zachary/assets/js/58.6787c716.js"><link rel="prefetch" href="/Zachary/assets/js/6.5acee334.js"><link rel="prefetch" href="/Zachary/assets/js/7.7a1c67b0.js"><link rel="prefetch" href="/Zachary/assets/js/8.f4ac18fa.js"><link rel="prefetch" href="/Zachary/assets/js/9.2b6dec57.js">
    <link rel="stylesheet" href="/Zachary/assets/css/0.styles.c575f4e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Zachary/" class="home-link router-link-active"><img src="/Zachary/assets/img/logo.jpg" alt="Zachary" class="logo"> <span class="site-name can-hide">Zachary</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Zachary/React/" class="nav-link router-link-active">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="babel" class="dropdown-title"><span class="title">babel</span> <span class="arrow down"></span></button> <button type="button" aria-label="babel" class="mobile-dropdown-title"><span class="title">babel</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/babel/" class="nav-link">
  æ¦‚è§ˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/integration/" class="nav-link">
  é›†æˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/presets/" class="nav-link">
  Presets
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/tools/" class="nav-link">
  å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/user/" class="nav-link">
  Babel ç”¨æˆ·æ‰‹å†Œ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/plugin/" class="nav-link">
  Babel æ’ä»¶æ‰‹å†Œ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/webpack/" class="nav-link">
  æ¦‚è§ˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/source/" class="nav-link">
  åŸç†åˆ†æ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/diff2rollup/" class="nav-link">
  åŒä¸­æœ‰å¼‚çš„Rollup
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Zachary-alt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Zachary/React/" class="nav-link router-link-active">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="babel" class="dropdown-title"><span class="title">babel</span> <span class="arrow down"></span></button> <button type="button" aria-label="babel" class="mobile-dropdown-title"><span class="title">babel</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/babel/" class="nav-link">
  æ¦‚è§ˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/integration/" class="nav-link">
  é›†æˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/presets/" class="nav-link">
  Presets
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/tools/" class="nav-link">
  å·¥å…·
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/user/" class="nav-link">
  Babel ç”¨æˆ·æ‰‹å†Œ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/plugin/" class="nav-link">
  Babel æ’ä»¶æ‰‹å†Œ
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/webpack/" class="nav-link">
  æ¦‚è§ˆ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/source/" class="nav-link">
  åŸç†åˆ†æ
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/diff2rollup/" class="nav-link">
  åŒä¸­æœ‰å¼‚çš„Rollup
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Zachary-alt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>èµ·æ­¥</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Zachary/React/umi.html#èµ·æ­¥" class="sidebar-link">èµ·æ­¥</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/React/umi.html#generator" class="sidebar-link">Generator</a></li><li class="sidebar-sub-header"><a href="/Zachary/React/umi.html#redux-saga" class="sidebar-link">redux-saga</a></li></ul></li><li><a href="/Zachary/React/umi.html#umi" class="sidebar-link">umi</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/React/umi.html#why-umi" class="sidebar-link">why umi</a></li><li class="sidebar-sub-header"><a href="/Zachary/React/umi.html#dva" class="sidebar-link">Dva</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="èµ·æ­¥"><a href="#èµ·æ­¥" class="header-anchor">#</a> èµ·æ­¥</h2> <h3 id="generator"><a href="#generator" class="header-anchor">#</a> <strong>Generator</strong></h3> <p>Generator å‡½æ•°æ˜¯ ES6 æä¾›çš„â¼€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆï¼Œè¯­æ³•è¡Œä¸ºä¸ä¼ ç»Ÿå‡½</p> <p>æ•°å®Œå…¨ä¸åŒï¼Œè¯¦ç»†å‚è€ƒå‚è€ƒ<a href="https://es6.ruanyifeng.com/#docs/generator" target="_blank" rel="noopener noreferrer">é˜®â¼€å³°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>ã€‚</p> <ol><li><p>functionå…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰â¼€ä¸ª*;</p></li> <li><p>å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨yieldè¡¨è¾¾å¼ï¼Œå®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€ã€‚</p></li> <li><p>yieldè¡¨è¾¾å¼åªèƒ½åœ¨ Generator å‡½æ•°é‡Œä½¿ç”¨ï¼Œåœ¨å…¶ä»–åœ°æ–¹ä¼šæŠ¥é”™ã€‚</p></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">yield</span> <span class="token string">'hello'</span><span class="token punctuation">;</span>
 <span class="token keyword">yield</span> <span class="token string">'world'</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token string">'ending'</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token keyword">var</span> hw <span class="token operator">=</span> <span class="token function">helloWorldGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//æ‰§è¡Œ</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>hw<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ç”±äº Generator å‡½æ•°è¿”å›çš„éå†å™¨å¯¹è±¡ï¼Œåªæœ‰è°ƒç”¨ nextæ–¹æ³•æ‰ä¼šéå†ä¸‹â¼€ä¸ªå†…éƒ¨çŠ¶æ€ï¼Œæ‰€ä»¥å…¶å®æä¾›äº†â¼€ç§å¯ä»¥æš‚åœæ‰§è¡Œçš„å‡½æ•°ã€‚ yieldè¡¨è¾¾å¼å°±æ˜¯æš‚åœæ ‡å¿—ã€‚</p> <h3 id="redux-saga"><a href="#redux-saga" class="header-anchor">#</a> <strong>redux-saga</strong></h3> <ul><li>æ¦‚è¿°ï¼šredux-sagaä½¿å‰¯ä½œç”¨ï¼ˆæ•°æ®è·å–ã€æµè§ˆå™¨ç¼“å­˜è·å–ï¼‰æ˜“äºç®¡ç†ã€æ‰§è¡Œã€æµ‹è¯•å’Œå¤±è´¥å¤„ç†</li> <li>åœ°å€ï¼šhttps://github.com/redux-saga/redux-saga</li> <li>å®‰è£…ï¼š<strong>npm install --save redux-saga</strong></li></ul> <p>ä½¿ç”¨ï¼šç”¨æˆ·ç™»å½•</p> <p>ç”¨<strong>saga</strong>çš„æ–¹å¼å®ç°ï¼š</p> <ul><li><p>åˆ›å»ºâ¼€ä¸ª./store/mySagas.jså¤„ç†ç”¨æˆ·ç™»å½•è¯·æ±‚</p> <p>callï¼š è°ƒç”¨å¼‚æ­¥æ“ä½œ</p> <p>putï¼šçŠ¶æ€æ›´æ–°</p> <p>takeEveryï¼šåšsagaç›‘å¬</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> takeEvery <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span><span class="token punctuation">;</span>

<span class="token comment">// æ¨¡æ‹Ÿç™»å½•æ¥å£</span>
<span class="token keyword">const</span> UserService <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">login</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;omg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">&quot;å°æ˜&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;å°æ˜&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//worker saga</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">loginHandle</span><span class="token punctuation">(</span><span class="token parameter">action</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>UserService<span class="token punctuation">.</span>login<span class="token punctuation">,</span> action<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;loginSuccess&quot;</span><span class="token punctuation">,</span> res <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;loginFail&quot;</span><span class="token punctuation">,</span> error <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//watcher saga</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">mySaga</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> <span class="token function">takeEvery</span><span class="token punctuation">(</span><span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> loginHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> mySaga<span class="token punctuation">;</span>
</code></pre></div></li> <li><p>æ³¨å†Œredux-sagaï¼Œåˆ›å»ºstore/index.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> logger <span class="token keyword">from</span> <span class="token string">'redux-logger'</span>
<span class="token comment">// import thunk from 'redux-thunk'</span>

<span class="token keyword">import</span> createSagaMiddleware <span class="token keyword">from</span> <span class="token string">&quot;redux-saga&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> mySaga <span class="token keyword">from</span> <span class="token string">&quot;./mySaga&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> counterReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./counterReducer'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> loginReducer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./loginReducer'</span>

<span class="token keyword">const</span> sagaMiddleware <span class="token operator">=</span> <span class="token function">createSagaMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> counter<span class="token operator">:</span> counterReducer<span class="token punctuation">,</span>user<span class="token operator">:</span>loginReducer <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>logger<span class="token punctuation">,</span> sagaMiddleware<span class="token punctuation">)</span><span class="token punctuation">)</span>
sagaMiddleware<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span>mySaga<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è¿™é‡Œæ³¨æ„sagaMiddleware.run ä¸èƒ½æ”¾äºåˆ›å»ºstoreå¼•ç”¨sagaä¸­é—´ä»¶ä¹‹å‰ï¼Œå¦åˆ™ä¼šå‡ºç°ä¸€ä¸ªé”™è¯¯</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store
</code></pre></div></li> <li><p>ç™»å½•é¡µé¢pages/LoginPage.js</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>Redirect<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-router-dom&quot;</span>

<span class="token keyword">class</span> <span class="token class-name">Login</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>userInfo<span class="token punctuation">,</span>login<span class="token punctuation">,</span>location<span class="token punctuation">}</span><span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>props
        <span class="token keyword">const</span> isLogin <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>isLogin<span class="token punctuation">;</span>
        <span class="token keyword">const</span> redirect <span class="token operator">=</span> location<span class="token punctuation">.</span>state<span class="token punctuation">.</span>redirect <span class="token operator">||</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">;</span> <span class="token comment">//é‡å®šå‘åœ°å€</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">&lt;</span>Redirect to<span class="token operator">=</span><span class="token punctuation">{</span>redirect<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>LoginPage<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token function">login</span><span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>ç™»å½•<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">mapStateToProps</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span> ownProps</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        userInfo<span class="token operator">:</span> state<span class="token punctuation">.</span>user
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> mapDispatchToProps <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">login</span><span class="token operator">:</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span>  <span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">,</span> name <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
    mapStateToProps<span class="token punctuation">,</span> <span class="token comment">//çŠ¶æ€æ˜ å°„</span>
    mapDispatchToProps <span class="token comment">//æ´¾å‘äº‹ä»¶æ˜ å°„</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Login<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <blockquote><p>redux-sagaåŸºäºgeneratorå®ç°ï¼Œä½¿ç”¨å‰ææ¸…æ¥šgeneratorç›¸å½“é‡è¦</p></blockquote> <h2 id="umi"><a href="#umi" class="header-anchor">#</a> <strong><a href="https://umijs.org/zh-CN" target="_blank" rel="noopener noreferrer">umi<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></h2> <h3 id="why-umi"><a href="#why-umi" class="header-anchor">#</a> <strong>why umi</strong></h3> <ul><li>ğŸ‰ <strong>å¯æ‰©å±•</strong>ï¼ŒUmi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼ŒUmi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆã€‚æ­¤å¤–è¿˜æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ã€‚</li> <li>ğŸ“¦ <strong>å¼€ç®±å³ç”¨</strong>ï¼ŒUmi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ã€‚å¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³æ—¥å¸¸ 80% çš„å¼€å‘éœ€æ±‚ã€‚</li> <li>ğŸ  <strong>ä¼ä¸šçº§</strong>ï¼Œç»èš‚èšå†…éƒ¨ 3000+ é¡¹ç›®ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸é¡¹ç›®çš„éªŒè¯ï¼Œå€¼å¾—ä¿¡èµ–ã€‚</li> <li>ğŸš€ <strong>å¤§é‡è‡ªç ”</strong>ï¼ŒåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooks åº“ã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸é¡¹ç›®çš„å‘¨è¾¹éœ€æ±‚ã€‚</li> <li>ğŸŒ´ <strong>å®Œå¤‡è·¯ç”±</strong>ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿æŒåŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ç­‰ã€‚</li> <li>ğŸš„ <strong>é¢å‘æœªæ¥</strong>ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåœæ­¢å¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ã€‚æ¯”å¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ– externalã€bundler less ç­‰ç­‰ã€‚</li></ul> <h3 id="dva"><a href="#dva" class="header-anchor">#</a> Dva</h3> <p>ä¸€ä¸ªåŸºäº<code>redux</code>å’Œ<code>redux-saga</code>çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œdva è¿˜é¢å¤–å†…ç½®äº†<code>react-router</code>å’Œ<code>fetch</code>ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æ¶ã€‚</p> <h4 id="dva-è§£å†³çš„é—®é¢˜"><a href="#dva-è§£å†³çš„é—®é¢˜" class="header-anchor">#</a> Dva è§£å†³çš„é—®é¢˜</h4> <p>å¤§å®¶åº”è¯¥éƒ½èƒ½ç†è§£ redux çš„æ¦‚å¿µï¼Œå¹¶è®¤å¯è¿™ç§æ•°æ®æµçš„æ§åˆ¶å¯ä»¥è®©åº”ç”¨æ›´å¯æ§ï¼Œä»¥åŠè®©é€»è¾‘æ›´æ¸…æ™°ã€‚ä½†éšä¹‹è€Œæ¥é€šå¸¸ä¼šæœ‰è¿™æ ·çš„ç–‘é—®ï¼šæ¦‚å¿µå¤ªå¤šï¼Œå¹¶ä¸” reducer, saga, action éƒ½æ˜¯åˆ†ç¦»çš„ï¼ˆåˆ†æ–‡ä»¶ï¼‰ã€‚</p> <ul><li>æ–‡ä»¶åˆ‡æ¢é—®é¢˜ã€‚redux çš„é¡¹ç›®é€šå¸¸è¦åˆ† reducer, action, saga, component ç­‰ç­‰ï¼Œä»–ä»¬çš„åˆ†ç›®å½•å­˜æ”¾é€ æˆçš„æ–‡ä»¶åˆ‡æ¢æˆæœ¬è¾ƒå¤§ã€‚</li> <li>ä¸ä¾¿äºç»„ç»‡ä¸šåŠ¡æ¨¡å‹ (æˆ–è€…å« domain model) ã€‚æ¯”å¦‚æˆ‘ä»¬å†™äº†ä¸€ä¸ª userlist ä¹‹åï¼Œè¦å†™ä¸€ä¸ª productlistï¼Œéœ€è¦å¤åˆ¶å¾ˆå¤šæ–‡ä»¶ã€‚</li> <li>saga åˆ›å»ºéº»çƒ¦ï¼Œæ¯ç›‘å¬ä¸€ä¸ª action éƒ½éœ€è¦èµ° fork -&gt; watcher -&gt; worker çš„æµç¨‹</li> <li>entry åˆ›å»ºéº»çƒ¦ã€‚å¯ä»¥çœ‹ä¸‹è¿™ä¸ª<a href="https://github.com/ant-design/antd-init/blob/master/boilerplates/redux/src/entries/index.js" target="_blank" rel="noopener noreferrer">redux entry<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>çš„ä¾‹å­ï¼Œé™¤äº† redux store çš„åˆ›å»ºï¼Œä¸­é—´ä»¶çš„é…ç½®ï¼Œè·¯ç”±çš„åˆå§‹åŒ–ï¼ŒProvider çš„ store çš„ç»‘å®šï¼Œsaga çš„åˆå§‹åŒ–ï¼Œè¿˜è¦å¤„ç† reducer, component, saga çš„ HMR ã€‚è¿™å°±æ˜¯çœŸå®çš„é¡¹ç›®åº”ç”¨ redux çš„ä¾‹å­ï¼Œçœ‹èµ·æ¥æ¯”è¾ƒå¤æ‚ã€‚</li></ul> <h4 id="dva-çš„ä¼˜åŠ¿"><a href="#dva-çš„ä¼˜åŠ¿" class="header-anchor">#</a> Dva çš„ä¼˜åŠ¿</h4> <ul><li><strong>æ˜“å­¦æ˜“ç”¨</strong>ï¼Œä»…æœ‰ 6 ä¸ª apiï¼Œå¯¹ redux ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œé…åˆ umi ä½¿ç”¨åæ›´æ˜¯é™ä½ä¸º 0 API</li> <li><strong>elm æ¦‚å¿µ</strong>ï¼Œé€šè¿‡ reducers, effects å’Œ subscriptions ç»„ç»‡ model</li> <li><strong>æ’ä»¶æœºåˆ¶</strong>ï¼Œæ¯”å¦‚dva-loadingå¯ä»¥è‡ªåŠ¨å¤„ç† loading çŠ¶æ€ï¼Œä¸ç”¨ä¸€ééåœ°å†™ showLoading å’Œ hideLoading</li> <li><strong>æ”¯æŒ HMR</strong>ï¼ŒåŸºäºbabel-plugin-dva-hmrå®ç° componentsã€routes å’Œ models çš„ HMR</li></ul> <blockquote><p>å¯¹äºç»å¤§å¤šæ•°ä¸æ˜¯ç‰¹åˆ«å¤æ‚çš„åœºæ™¯æ¥è¯´ï¼Œç›®å‰å¯ä»¥è¢« Hooks å–ä»£</p></blockquote> <p><a href="https://github.com/Zachary-alt/umi-demo" target="_blank" rel="noopener noreferrer">umi-demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/17/2021, 5:53:32 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Zachary/assets/js/app.2a4c88dc.js" defer></script><script src="/Zachary/assets/js/2.10e03947.js" defer></script><script src="/Zachary/assets/js/21.c8401ded.js" defer></script>
  </body>
</html>
