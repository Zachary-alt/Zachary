<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>工具 | Zachary</title>
    <meta name="generator" content="VuePress 1.7.1">
    
    <meta name="description" content="前端学习笔记">
    
    <link rel="preload" href="/Zachary/assets/css/0.styles.c575f4e7.css" as="style"><link rel="preload" href="/Zachary/assets/js/app.6c844095.js" as="script"><link rel="preload" href="/Zachary/assets/js/2.10e03947.js" as="script"><link rel="preload" href="/Zachary/assets/js/27.4a4d5aa8.js" as="script"><link rel="prefetch" href="/Zachary/assets/js/10.779acdb7.js"><link rel="prefetch" href="/Zachary/assets/js/11.47e52921.js"><link rel="prefetch" href="/Zachary/assets/js/12.883931d6.js"><link rel="prefetch" href="/Zachary/assets/js/13.81c66bcf.js"><link rel="prefetch" href="/Zachary/assets/js/14.0c158d85.js"><link rel="prefetch" href="/Zachary/assets/js/15.5a57096f.js"><link rel="prefetch" href="/Zachary/assets/js/16.01eb24a3.js"><link rel="prefetch" href="/Zachary/assets/js/17.9521f3ac.js"><link rel="prefetch" href="/Zachary/assets/js/18.0494b86d.js"><link rel="prefetch" href="/Zachary/assets/js/19.c1977d1c.js"><link rel="prefetch" href="/Zachary/assets/js/20.86b97d62.js"><link rel="prefetch" href="/Zachary/assets/js/21.c8401ded.js"><link rel="prefetch" href="/Zachary/assets/js/22.9b1fe8cb.js"><link rel="prefetch" href="/Zachary/assets/js/23.2388b13b.js"><link rel="prefetch" href="/Zachary/assets/js/24.a7b58819.js"><link rel="prefetch" href="/Zachary/assets/js/25.12fc046d.js"><link rel="prefetch" href="/Zachary/assets/js/26.731acb91.js"><link rel="prefetch" href="/Zachary/assets/js/28.7ad24993.js"><link rel="prefetch" href="/Zachary/assets/js/29.648793b5.js"><link rel="prefetch" href="/Zachary/assets/js/3.344c53d3.js"><link rel="prefetch" href="/Zachary/assets/js/30.249dc887.js"><link rel="prefetch" href="/Zachary/assets/js/31.6f2a93e9.js"><link rel="prefetch" href="/Zachary/assets/js/32.e8724a94.js"><link rel="prefetch" href="/Zachary/assets/js/33.a2a821b0.js"><link rel="prefetch" href="/Zachary/assets/js/34.bfab4b72.js"><link rel="prefetch" href="/Zachary/assets/js/35.b04ecbe3.js"><link rel="prefetch" href="/Zachary/assets/js/36.56e8fec5.js"><link rel="prefetch" href="/Zachary/assets/js/37.7f88aa87.js"><link rel="prefetch" href="/Zachary/assets/js/38.cc31c98e.js"><link rel="prefetch" href="/Zachary/assets/js/39.d72bbbb3.js"><link rel="prefetch" href="/Zachary/assets/js/4.74f6a04d.js"><link rel="prefetch" href="/Zachary/assets/js/40.230997a3.js"><link rel="prefetch" href="/Zachary/assets/js/41.9a7eacad.js"><link rel="prefetch" href="/Zachary/assets/js/42.009f16b7.js"><link rel="prefetch" href="/Zachary/assets/js/43.614cfb6f.js"><link rel="prefetch" href="/Zachary/assets/js/44.ce5ad28d.js"><link rel="prefetch" href="/Zachary/assets/js/45.f7790a0c.js"><link rel="prefetch" href="/Zachary/assets/js/46.941fc5e6.js"><link rel="prefetch" href="/Zachary/assets/js/47.068dae75.js"><link rel="prefetch" href="/Zachary/assets/js/48.7dfe07fb.js"><link rel="prefetch" href="/Zachary/assets/js/49.b22dd2a1.js"><link rel="prefetch" href="/Zachary/assets/js/5.dfe6aeb3.js"><link rel="prefetch" href="/Zachary/assets/js/50.492c4a40.js"><link rel="prefetch" href="/Zachary/assets/js/51.d1965c5e.js"><link rel="prefetch" href="/Zachary/assets/js/52.086436f0.js"><link rel="prefetch" href="/Zachary/assets/js/53.98b026c6.js"><link rel="prefetch" href="/Zachary/assets/js/54.ae982b1c.js"><link rel="prefetch" href="/Zachary/assets/js/55.25d3775d.js"><link rel="prefetch" href="/Zachary/assets/js/56.cc666002.js"><link rel="prefetch" href="/Zachary/assets/js/57.373dc95c.js"><link rel="prefetch" href="/Zachary/assets/js/58.40e6c5a9.js"><link rel="prefetch" href="/Zachary/assets/js/59.f3f123c3.js"><link rel="prefetch" href="/Zachary/assets/js/6.215b6e59.js"><link rel="prefetch" href="/Zachary/assets/js/60.c559ba98.js"><link rel="prefetch" href="/Zachary/assets/js/61.900de37f.js"><link rel="prefetch" href="/Zachary/assets/js/62.1484eb13.js"><link rel="prefetch" href="/Zachary/assets/js/7.99bab301.js"><link rel="prefetch" href="/Zachary/assets/js/8.f4ac18fa.js"><link rel="prefetch" href="/Zachary/assets/js/9.2b6dec57.js">
    <link rel="stylesheet" href="/Zachary/assets/css/0.styles.c575f4e7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Zachary/" class="home-link router-link-active"><img src="/Zachary/assets/img/logo.jpg" alt="Zachary" class="logo"> <span class="site-name can-hide">Zachary</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Zachary/babel/" class="nav-link router-link-active">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="babel" class="dropdown-title"><span class="title">babel</span> <span class="arrow down"></span></button> <button type="button" aria-label="babel" class="mobile-dropdown-title"><span class="title">babel</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/babel/" class="nav-link router-link-active">
  概览
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/integration/" class="nav-link">
  集成
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/presets/" class="nav-link">
  Presets
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/tools/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/user/" class="nav-link">
  Babel 用户手册
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/plugin/" class="nav-link">
  Babel 插件手册
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/webpack/" class="nav-link">
  概览
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/source/" class="nav-link">
  原理分析
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/diff2rollup/" class="nav-link">
  同中有异的Rollup
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Zachary-alt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Zachary/babel/" class="nav-link router-link-active">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="babel" class="dropdown-title"><span class="title">babel</span> <span class="arrow down"></span></button> <button type="button" aria-label="babel" class="mobile-dropdown-title"><span class="title">babel</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/babel/" class="nav-link router-link-active">
  概览
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/integration/" class="nav-link">
  集成
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/presets/" class="nav-link">
  Presets
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/tools/" class="nav-link">
  工具
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/user/" class="nav-link">
  Babel 用户手册
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/babel/plugin/" class="nav-link">
  Babel 插件手册
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Zachary/webpack/" class="nav-link">
  概览
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/source/" class="nav-link">
  原理分析
</a></li><li class="dropdown-item"><!----> <a href="/Zachary/webpack/diff2rollup/" class="nav-link">
  同中有异的Rollup
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Zachary-alt" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Zachary/babel/tools.html#babel-parser" class="sidebar-link">@babel/parser</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#api" class="sidebar-link">API</a></li></ul></li><li><a href="/Zachary/babel/tools.html#babel-core" class="sidebar-link">@babel/core</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transform" class="sidebar-link">transform</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformsync" class="sidebar-link">transformSync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformasync" class="sidebar-link">transformAsync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformfile" class="sidebar-link">transformFile</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformfilesync" class="sidebar-link">transformFileSync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformfileasync" class="sidebar-link">transformFileAsync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformfromast" class="sidebar-link">transformFromAst</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#transformfromastasync" class="sidebar-link">transformFromAstAsync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#parse" class="sidebar-link">parse</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#parsesync" class="sidebar-link">parseSync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#parseasync" class="sidebar-link">parseAsync</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#advanced-apis" class="sidebar-link">Advanced APIs</a></li></ul></li><li><a href="/Zachary/babel/tools.html#babel-generator" class="sidebar-link">@babel/generator</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Zachary/babel/tools.html#babel-code-frame" class="sidebar-link">@babel/code-frame</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/Zachary/babel/tools.html#babel-runtime" class="sidebar-link">@babel/runtime</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#安装" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#使用" class="sidebar-link">使用</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#为什么" class="sidebar-link">为什么</a></li></ul></li><li><a href="/Zachary/babel/tools.html#babel-template" class="sidebar-link">@babel/template</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#字符串的使用" class="sidebar-link">字符串的使用</a></li></ul></li><li><a href="/Zachary/babel/tools.html#babel-traverse" class="sidebar-link">@babel/traverse</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#安装-2" class="sidebar-link">安装</a></li><li class="sidebar-sub-header"><a href="/Zachary/babel/tools.html#使用-2" class="sidebar-link">使用</a></li></ul></li><li><a href="/Zachary/babel/tools.html#babel-types" class="sidebar-link">@babel/types</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="工具"><a href="#工具" class="header-anchor">#</a> 工具</h1> <h2 id="babel-parser"><a href="#babel-parser" class="header-anchor">#</a> @babel/parser</h2> <p>Babel解析器(以前是Babylon)是在Babel中使用的JavaScript解析器。</p> <ul><li>默认启用的最新ECMAScript版本(ES2020)。</li> <li>注解附件。</li> <li>支持JSX, Flow, Typescript。</li> <li>支持实验性语言提案(接受PRs，至少为阶段0接受任何东西)。</li></ul> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <h4 id="babelparser-parse-code-options"><a href="#babelparser-parse-code-options" class="header-anchor">#</a> <code>babelParser.parse(code, [options])</code></h4> <h4 id="babelparser-parseexpression-code-options"><a href="#babelparser-parseexpression-code-options" class="header-anchor">#</a> <code>babelParser.parseExpression(code, [options])</code></h4> <p>parse()将代码解析为整个ECMAScript程序，而parseExpression()则考虑到性能，尝试解析单个表达式。当有疑问时，使用.parse()。</p> <h4 id="options"><a href="#options" class="header-anchor">#</a> Options</h4> <p><strong>allowImportExportEverywhere</strong>: 默认情况下，import和export声明只能出现在程序的顶层。将此选项设置为true允许在任何允许语句的地方使用它们。</p> <p><strong>allowAwaitOutsideFunction</strong>: 默认情况下，await只允许在async函数中使用，或者当topLevelAwait插件启用时，在模块的顶级作用域中使用。将此设置为true，以便在脚本的顶级作用域中也接受它。这个选项不建议使用topLevelAwait插件。</p> <p><strong>allowReturnOutsideFunction</strong>: 默认情况下，顶层的return语句会引发错误。将此设置为true以接受此类代码。</p> <p><strong>allowSuperOutsideMethod</strong>: 默认情况下，不允许在类和对象方法之外使用<code>super</code>方法。将此设置为true以接受此类代码。</p> <p><strong>allowUndeclaredExports</strong>:默认情况下，导出当前模块范围内未声明的标识符将引发错误。虽然ECMAScript模块规范要求这种行为，但Babel的解析器不能预测插件管道中稍后可能插入适当声明的转换，因此，有时重要的是将该选项设置为true，以防止解析器过早地抱怨将在稍后添加的未声明的导出。</p> <p><strong>createParenthesizedExpressions</strong>: 默认情况下，解析器会在表达式节点上设置<code>extra.parenthesized</code>（括号）。当此选项设置为true时，将创建<code>parenthesedexpression</code> AST节点。</p> <p><strong>errorRecovery</strong>: 默认情况下，Babel总是在发现一些无效代码时抛出错误。当此选项设置为true时，它将存储解析错误并尝试继续解析无效的输入文件。得到的AST将具有一个errors属性，表示所有解析错误的数组。请注意，即使启用了这个选项，@babel/parser也可能抛出不可恢复的错误。</p> <p><strong>plugins</strong>: 包含要启用的插件的数组。</p> <p><strong>sourceType</strong>: 指示代码应该被解析的模式。可以是<code>&quot;script&quot;</code>, <code>&quot;module&quot;</code>, 或者 <code>&quot;unambiguous&quot;</code>之一。默认为<code>“script”</code>。<code>“unambiguous”</code>将让@babel/parser根据ES6 import或export语句的存在进行猜测。带有ES6导入和导出的文件被认为是“module”，否则是“script”。</p> <p><strong>sourceFilename</strong>:将输出AST节点与其源文件名关联起来。在从多个输入文件的ast生成代码和源映射时非常有用。</p> <p><strong>startLine</strong>: 默认情况下，解析的第一行代码被视为第1行。可以提供一个行号数字作为开头。用于与其他源工具集成。</p> <p><strong>strictMode</strong>:默认情况下，ECMAScript代码只有在“use strict”;指令，或者被解析的文件是一个ECMAScript模块。将此选项设置为true表示始终以严格模式解析文件。</p> <p><strong>ranges</strong>: 为每个节点添加一个范围属性:<code>[node.start, node.end]</code></p> <p><strong>tokens</strong>:将所有已解析的tokens添加到File节点上的tokens属性</p> <h4 id="output"><a href="#output" class="header-anchor">#</a> Output</h4> <p>Babel解析器根据Babel AST格式生成AST。它是基于ESTree规范的，有以下偏差:</p> <ul><li>Literal标记被替换为StringLiteral, NumericLiteral, BigIntLiteral, BooleanLiteral, NullLiteral, RegExpLiteral</li> <li>属性令牌替换为ObjectProperty和ObjectMethod</li> <li>MethodDefinition被ClassMethod代替</li> <li>Program和BlockStatement包含附加的Directive和DirectiveLiteral指令字段</li> <li>ClassMethod、ObjectProperty和ObjectMethod值属性在FunctionExpression中的属性被强制/带入主方法节点。</li> <li>ChainExpression被替换为OptionalMemberExpression和optionalcallexexpression</li> <li>ImportExpression被替换为callexexpression，其被调用者是一个Import节点。</li></ul> <blockquote><p>现在有一个estree插件可以恢复这些偏差</p></blockquote> <p>AST for JSX的代码是基于Facebook的JSX AST。</p> <h2 id="babel-core"><a href="#babel-core" class="header-anchor">#</a> @babel/core</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> babel <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> transform <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> babel <span class="token keyword">from</span> <span class="token string">&quot;@babel/core&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>所有转换都将使用本地配置文件。</p> <h3 id="transform"><a href="#transform" class="header-anchor">#</a> transform</h3> <blockquote><p>babel.transform(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object, callback: Function)</p></blockquote> <p>转换已经通过的代码。使用带有生成代码、源映射和AST的对象调用回调函数。</p> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transform</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result<span class="token punctuation">;</span> <span class="token comment">// =&gt; { code, map, ast }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>兼容注意:
在Babel 6中，这种方法是同步的，transformSync并不存在。为了向后兼容，如果没有给出回调函数，这个函数将同步运行。如果你从Babel 7开始，需要同步行为，请使用transformSync，因为这个向后兼容性将在Babel 8中被删除。</p></blockquote> <h3 id="transformsync"><a href="#transformsync" class="header-anchor">#</a> transformSync</h3> <blockquote><p>babel.transformSync(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>转换已经通过的代码。返回一个带有生成的代码、源映射和AST的对象。</p> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transformSync</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; { code, map, ast }</span>
</code></pre></div><h3 id="transformasync"><a href="#transformasync" class="header-anchor">#</a> transformAsync</h3> <blockquote><p>babel.transformAsync(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transformAsync</span><span class="token punctuation">(</span>code<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Promise&lt;{ code, map, ast }&gt;</span>
</code></pre></div><h3 id="transformfile"><a href="#transformfile" class="header-anchor">#</a> transformFile</h3> <blockquote><p>babel.transformFile(filename: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object, callback: Function)</p></blockquote> <p>异步转换文件的全部内容。</p> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transformFile</span><span class="token punctuation">(</span><span class="token string">&quot;filename.js&quot;</span><span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result<span class="token punctuation">;</span> <span class="token comment">// =&gt; { code, map, ast }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="transformfilesync"><a href="#transformfilesync" class="header-anchor">#</a> transformFileSync</h3> <blockquote><p>babel.transformFileSync(filename: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>babel.transformFile的同步版本。返回已转换的文件名内容。</p> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transformFileSync</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; { code, map, ast }</span>
</code></pre></div><h3 id="transformfileasync"><a href="#transformfileasync" class="header-anchor">#</a> transformFileAsync</h3> <blockquote><p>babel.transformFileAsync(filename: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>babel.transformFile的Promise版本。为文件名的转换内容返回一个Promise</p> <div class="language-js extra-class"><pre class="language-js"><code>babel<span class="token punctuation">.</span><span class="token function">transformFileAsync</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// =&gt; Promise&lt;{ code, map, ast }&gt;</span>
</code></pre></div><h3 id="transformfromast"><a href="#transformfromast" class="header-anchor">#</a> transformFromAst</h3> <blockquote><p>babel.transformFromAst(ast: Object, code?: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object, callback: Function): FileNode | null</p></blockquote> <p>给定一个AST，转换它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sourceCode <span class="token operator">=</span> <span class="token string">&quot;if (true) return;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> parsedAst <span class="token operator">=</span> babel<span class="token punctuation">.</span><span class="token function">parseSync</span><span class="token punctuation">(</span>sourceCode<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  parserOpts<span class="token operator">:</span> <span class="token punctuation">{</span> allowReturnOutsideFunction<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
babel<span class="token punctuation">.</span><span class="token function">transformFromAst</span><span class="token punctuation">(</span>parsedAst<span class="token punctuation">,</span> sourceCode<span class="token punctuation">,</span> options<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> code<span class="token punctuation">,</span> map<span class="token punctuation">,</span> ast <span class="token punctuation">}</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="transformfromastasync"><a href="#transformfromastasync" class="header-anchor">#</a> transformFromAstAsync</h3> <blockquote><p>babel.transformFromAstAsync(ast: Object, code?: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> sourceCode <span class="token operator">=</span> <span class="token string">&quot;if (true) return;&quot;</span><span class="token punctuation">;</span>
babel
  <span class="token punctuation">.</span><span class="token function">parseAsync</span><span class="token punctuation">(</span>sourceCode<span class="token punctuation">,</span> <span class="token punctuation">{</span> parserOpts<span class="token operator">:</span> <span class="token punctuation">{</span> allowReturnOutsideFunction<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">parsedAst</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> babel<span class="token punctuation">.</span><span class="token function">transformFromAstAsync</span><span class="token punctuation">(</span>parsedAst<span class="token punctuation">,</span> sourceCode<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> code<span class="token punctuation">,</span> map<span class="token punctuation">,</span> ast <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="parse"><a href="#parse" class="header-anchor">#</a> parse</h3> <blockquote><p>babel.parse(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object, callback: Function)</p></blockquote> <p>给定一些代码，使用Babel的标准行为解析它。引用的预设和插件将被加载，这样可选的语法插件将被自动启用。</p> <blockquote><p>兼容注意:
在Babel 7的早期测试版中，这种方法是同步的，parseSync并不存在。为了向后兼容，如果没有给出回调函数，这个函数将同步运行。如果你从Babel 7开始，需要同步行为，请使用parseSync，因为这种向后兼容性将在Babel 8中被删除。</p></blockquote> <h3 id="parsesync"><a href="#parsesync" class="header-anchor">#</a> parseSync</h3> <blockquote><p>babel.parseSync(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>返回一个AST。
给定一些代码，使用Babel的标准行为解析它。引用的预设和插件将被加载，这样可选的语法插件将被自动启用。</p> <h3 id="parseasync"><a href="#parseasync" class="header-anchor">#</a> parseAsync</h3> <blockquote><p>babel.parseAsync(code: string, <a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>Returns a promise for an AST.</p> <h3 id="advanced-apis"><a href="#advanced-apis" class="header-anchor">#</a> Advanced APIs</h3> <p>许多包了Babel的系统喜欢自动注入插件和预设，或覆盖选项。为了实现这个目标，Babel公开了几个功能，这些功能可以在不进行转换的情况下部分地加载配置。</p> <h4 id="loadoptions"><a href="#loadoptions" class="header-anchor">#</a> loadOptions</h4> <blockquote><p>babel.loadOptions(<a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object)</p></blockquote> <p>完全解决Babel的选项，产生一个options对象:</p> <ul><li><code>opts.plugins</code>是Plugin实例的完整列表。</li> <li><code>opts.presets</code>是空的，所有预设都被压平成选项。</li> <li>可以安全地传递回Babel。像“babelrc”这样的字段被设置为false，以便以后调用Babel时不会再次尝试加载配置文件。</li></ul> <p>Plugin实例并不意味着要被直接操作，但调用者通常会将这个opts序列化到JSON，以使用它作为缓存键，表示Babel收到的选项。在此缓存不能100%保证正确地失效，但这是目前我们最好的。</p> <h4 id="loadpartialconfig"><a href="#loadpartialconfig" class="header-anchor">#</a> loadPartialConfig</h4> <blockquote><p>babel.loadPartialConfig(<a href="https://www.babeljs.cn/docs/babel-core#options" target="_blank" rel="noopener noreferrer">options?<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>: Object): PartialConfig</p></blockquote> <p>为了让系统方便地操作和验证用户的配置，该函数解析插件和预设，不再继续。期望的是，调用者将接受配置.options，按照他们认为合适的方式操纵它，然后再传给Babel。</p> <p>除了标准选项外，这个函数还接受一个附加选项作为选项对象的一部分:showIgnoredFiles。当设置为true时，loadPartialConfig在忽略文件时总是返回一个结果，而不是null。这对于允许调用者访问影响此结果的文件列表非常有用，例如对于监视模式。调用者可以根据返回的fileHandling属性确定文件是否被忽略。</p> <ul><li><code>babelrc: string | void</code> - 文件相关配置文件的路径(如果有的话)。</li> <li><code>babelignore: string | void</code> - babelignore文件的路径(如果有的话)。</li> <li><code>config: string | void</code> - 项目范围的配置文件文件的路径(如果有的话)。</li> <li><code>options: ValidatedOptions</code> - 部分解决的选项，可以操纵并再次传递回Babel。
<ul><li><code>plugins: Array&lt;ConfigItem&gt;</code> - 见下文</li> <li><code>presets: Array&lt;ConfigItem&gt;</code> - 见下文</li> <li>可以安全地返回Babel。像“babelrc”这样的选项被设置为false，以便以后调用Babel时不会再次尝试加载配置文件。</li></ul></li> <li><code>hasFilesystemConfig(): boolean</code> - 检查已解析的配置是否从文件系统加载了任何设置。</li> <li><code>fileHandling</code> - 它被设置为“transpile”、“ignored”或“unsupported”来指示调用者该如何处理这个文件。</li> <li><code>files</code> - 一个文件路径Set，用于构建结果，包括项目范围的配置文件、本地配置文件、扩展配置文件、忽略文件等。用于实现监视模式或缓存失效。</li></ul> <p>ConfigItem实例公开属性以内省值，但每个项都应视为不可变的。如果需要进行更改，则应该从列表中删除该项，并用普通的Babel配置值或由Babel . createconfigitem创建的替换项替换。有关ConfigItem字段的信息，请参见该函数。</p> <h4 id="createconfigitem"><a href="#createconfigitem" class="header-anchor">#</a> createConfigItem</h4> <blockquote><p>babel.createConfigItem(value: string | {} | Function | [string | {} | Function, {} | void], { dirname?: string, type?: &quot;preset&quot; | &quot;plugin&quot; }): ConfigItem</p></blockquote> <p>允许构建工具预先创建和缓存配置项。如果这个函数在一个给定的插件中被多次调用，Babel就会多次调用插件本身的函数。如果您有一组清晰的预期插件和要注入的预设，那么建议预先构造配置项。</p> <h2 id="babel-generator"><a href="#babel-generator" class="header-anchor">#</a> <a href="https://www.babeljs.cn/docs/babel-generator" target="_blank" rel="noopener noreferrer">@babel/generator<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <blockquote><p>将AST转换为代码。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> parse <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@babel/parser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> generate <span class="token keyword">from</span> <span class="token string">&quot;@babel/generator&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token string">&quot;class Example {}&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ast <span class="token operator">=</span> <span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">generate</span><span class="token punctuation">(</span>
  ast<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token comment">/* options */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  code
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="babel-code-frame"><a href="#babel-code-frame" class="header-anchor">#</a> <a href="https://www.babeljs.cn/docs/babel-code-frame" target="_blank" rel="noopener noreferrer">@babel/code-frame<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>设置代码结构</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> codeFrameColumns <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@babel/code-frame&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> rawLines <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">class Foo {
  constructor() {
    console.log(&quot;hello&quot;);
  }
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> location <span class="token operator">=</span> <span class="token punctuation">{</span>
  start<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">17</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  end<span class="token operator">:</span> <span class="token punctuation">{</span> line<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> column<span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">codeFrameColumns</span><span class="token punctuation">(</span>rawLines<span class="token punctuation">,</span> location<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token comment">/* options */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>  <span class="token number">1</span> <span class="token operator">|</span> <span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
<span class="token operator">&gt;</span> <span class="token number">2</span> <span class="token operator">|</span>   <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">|</span>                 <span class="token operator">^</span>
<span class="token operator">&gt;</span> <span class="token number">3</span> <span class="token operator">|</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">|</span> <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span>
<span class="token operator">&gt;</span> <span class="token number">4</span> <span class="token operator">|</span>   <span class="token punctuation">}</span>
    <span class="token operator">|</span> <span class="token operator">^</span><span class="token operator">^</span><span class="token operator">^</span>
  <span class="token number">5</span> <span class="token operator">|</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="babel-runtime"><a href="#babel-runtime" class="header-anchor">#</a> @babel/runtime</h2> <p>@babel/runtime是一个包含babel模块化运行时helpers和一个版本的<code>regenerator-runtime</code>(再生器运行时)。</p> <h3 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h3> <div class="language- extra-class"><pre class="language-text"><code>npm install --save @babel/runtime
</code></pre></div><blockquote><p>另请参见：<a href="https://www.babeljs.cn/docs/babel-runtime-corejs2" target="_blank" rel="noopener noreferrer"><code>@babel/runtime-corejs2</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.。</p></blockquote> <h3 id="使用"><a href="#使用" class="header-anchor">#</a> 使用</h3> <p>这意味着将与Babel plugin <a href="https://www.babeljs.cn/docs/babel-plugin-transform-runtime" target="_blank" rel="noopener noreferrer"><code>@babel/plugin-transform-runtime</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一起用作运行时依赖项。请查阅该软件包中的文档以供使用。</p> <h3 id="为什么"><a href="#为什么" class="header-anchor">#</a> 为什么</h3> <p>有时Babel可能会在输出中注入一些跨文件相同的代码，因此可能会被重用。</p> <p>例如，使用类转换（无松散模式）：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>转换成</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token parameter">instance<span class="token punctuation">,</span> Constructor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> <span class="token function-variable function">Circle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>这意味着每个包含类的文件每次都会重复使用_classCallCheck 函数。</p> <p>对于@babel/plugin transform runtime，它将替换对@babel/runtime版本的函数引用。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> _classCallCheck <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;@babel/runtime/helpers/classCallCheck&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">Circle</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">Circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">_classCallCheck</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> Circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>@babel/runtime包中的函数实现是模块化的。</p> <h2 id="babel-template"><a href="#babel-template" class="header-anchor">#</a> <a href="https://www.babeljs.cn/docs/babel-template" target="_blank" rel="noopener noreferrer">@babel/template<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>在计算机科学中，这被称为准引号的实现。</p> <h3 id="字符串的使用"><a href="#字符串的使用" class="header-anchor">#</a> 字符串的使用</h3> <p>当使用带字符串参数的函数调用template时，可以提供占位符，当使用模板时，占位符将被替换。</p> <p>你可以使用两种不同的占位符:语法占位符(例如%%name%%)或标识符占位符(例如name)。@babel/template默认支持这两种方法，但不能混合使用。如果需要明确所使用的语法，可以使用syntacticplaceholder选项。</p> <p>请注意，在Babel 7.4.0中引入了语法占位符。如果你不能控制@babel/template版本(例如，从@babel/core@^7.0.0对等依赖中导入它)，你必须使用标识符占位符。另一方面，语法占位符有一些优点:它们可以用于标识符可能是一个语法错误的地方(例如，替换函数体，或在导出声明中)，而且它们不会与大写变量冲突(例如，new URL())。</p> <h2 id="babel-traverse"><a href="#babel-traverse" class="header-anchor">#</a> @babel/traverse</h2> <h3 id="安装-2"><a href="#安装-2" class="header-anchor">#</a> 安装</h3> <div class="language- extra-class"><pre class="language-text"><code>$ npm install --save @babel/traverse
</code></pre></div><h3 id="使用-2"><a href="#使用-2" class="header-anchor">#</a> 使用</h3> <p>我们可以使用它与babel解析器一起遍历和更新节点：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> parser <span class="token keyword">from</span> <span class="token string">&quot;@babel/parser&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> traverse <span class="token keyword">from</span> <span class="token string">&quot;@babel/traverse&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> code <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">function square(n) {
  return n * n;
}</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ast <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">enter</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">isIdentifier</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">&quot;n&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      path<span class="token punctuation">.</span>node<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此外，我们可以针对语法树中的特定<a href="https://babeljs.io/docs/en/babel-types#api" target="_blank" rel="noopener noreferrer">节点类型<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">traverse</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">FunctionDeclaration</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             path<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;x&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="babel-types"><a href="#babel-types" class="header-anchor">#</a> <a href="https://www.babeljs.cn/docs/babel-types" target="_blank" rel="noopener noreferrer">@babel/types<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>此模块包含用于手动构建AST和检查AST节点类型的方法。</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --save-dev @babel/types
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">7/9/2021, 6:18:23 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/Zachary/assets/js/app.6c844095.js" defer></script><script src="/Zachary/assets/js/2.10e03947.js" defer></script><script src="/Zachary/assets/js/27.4a4d5aa8.js" defer></script>
  </body>
</html>
