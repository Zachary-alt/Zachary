(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{403:function(t,a,s){"use strict";s.r(a);var n=s(42),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#工具"}},[t._v("#")]),t._v(" 工具")]),t._v(" "),s("h2",{attrs:{id:"babel-parser"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-parser"}},[t._v("#")]),t._v(" @babel/parser")]),t._v(" "),s("p",[t._v("Babel解析器(以前是Babylon)是在Babel中使用的JavaScript解析器。")]),t._v(" "),s("ul",[s("li",[t._v("默认启用的最新ECMAScript版本(ES2020)。")]),t._v(" "),s("li",[t._v("注解附件。")]),t._v(" "),s("li",[t._v("支持JSX, Flow, Typescript。")]),t._v(" "),s("li",[t._v("支持实验性语言提案(接受PRs，至少为阶段0接受任何东西)。")])]),t._v(" "),s("h3",{attrs:{id:"api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),s("h4",{attrs:{id:"babelparser-parse-code-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babelparser-parse-code-options"}},[t._v("#")]),t._v(" "),s("code",[t._v("babelParser.parse(code, [options])")])]),t._v(" "),s("h4",{attrs:{id:"babelparser-parseexpression-code-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babelparser-parseexpression-code-options"}},[t._v("#")]),t._v(" "),s("code",[t._v("babelParser.parseExpression(code, [options])")])]),t._v(" "),s("p",[t._v("parse()将代码解析为整个ECMAScript程序，而parseExpression()则考虑到性能，尝试解析单个表达式。当有疑问时，使用.parse()。")]),t._v(" "),s("h4",{attrs:{id:"options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#options"}},[t._v("#")]),t._v(" Options")]),t._v(" "),s("p",[s("strong",[t._v("allowImportExportEverywhere")]),t._v(": 默认情况下，import和export声明只能出现在程序的顶层。将此选项设置为true允许在任何允许语句的地方使用它们。")]),t._v(" "),s("p",[s("strong",[t._v("allowAwaitOutsideFunction")]),t._v(": 默认情况下，await只允许在async函数中使用，或者当topLevelAwait插件启用时，在模块的顶级作用域中使用。将此设置为true，以便在脚本的顶级作用域中也接受它。这个选项不建议使用topLevelAwait插件。")]),t._v(" "),s("p",[s("strong",[t._v("allowReturnOutsideFunction")]),t._v(": 默认情况下，顶层的return语句会引发错误。将此设置为true以接受此类代码。")]),t._v(" "),s("p",[s("strong",[t._v("allowSuperOutsideMethod")]),t._v(": 默认情况下，不允许在类和对象方法之外使用"),s("code",[t._v("super")]),t._v("方法。将此设置为true以接受此类代码。")]),t._v(" "),s("p",[s("strong",[t._v("allowUndeclaredExports")]),t._v(":默认情况下，导出当前模块范围内未声明的标识符将引发错误。虽然ECMAScript模块规范要求这种行为，但Babel的解析器不能预测插件管道中稍后可能插入适当声明的转换，因此，有时重要的是将该选项设置为true，以防止解析器过早地抱怨将在稍后添加的未声明的导出。")]),t._v(" "),s("p",[s("strong",[t._v("createParenthesizedExpressions")]),t._v(": 默认情况下，解析器会在表达式节点上设置"),s("code",[t._v("extra.parenthesized")]),t._v("（括号）。当此选项设置为true时，将创建"),s("code",[t._v("parenthesedexpression")]),t._v(" AST节点。")]),t._v(" "),s("p",[s("strong",[t._v("errorRecovery")]),t._v(": 默认情况下，Babel总是在发现一些无效代码时抛出错误。当此选项设置为true时，它将存储解析错误并尝试继续解析无效的输入文件。得到的AST将具有一个errors属性，表示所有解析错误的数组。请注意，即使启用了这个选项，@babel/parser也可能抛出不可恢复的错误。")]),t._v(" "),s("p",[s("strong",[t._v("plugins")]),t._v(": 包含要启用的插件的数组。")]),t._v(" "),s("p",[s("strong",[t._v("sourceType")]),t._v(": 指示代码应该被解析的模式。可以是"),s("code",[t._v('"script"')]),t._v(", "),s("code",[t._v('"module"')]),t._v(", 或者 "),s("code",[t._v('"unambiguous"')]),t._v("之一。默认为"),s("code",[t._v("“script”")]),t._v("。"),s("code",[t._v("“unambiguous”")]),t._v("将让@babel/parser根据ES6 import或export语句的存在进行猜测。带有ES6导入和导出的文件被认为是“module”，否则是“script”。")]),t._v(" "),s("p",[s("strong",[t._v("sourceFilename")]),t._v(":将输出AST节点与其源文件名关联起来。在从多个输入文件的ast生成代码和源映射时非常有用。")]),t._v(" "),s("p",[s("strong",[t._v("startLine")]),t._v(": 默认情况下，解析的第一行代码被视为第1行。可以提供一个行号数字作为开头。用于与其他源工具集成。")]),t._v(" "),s("p",[s("strong",[t._v("strictMode")]),t._v(":默认情况下，ECMAScript代码只有在“use strict”;指令，或者被解析的文件是一个ECMAScript模块。将此选项设置为true表示始终以严格模式解析文件。")]),t._v(" "),s("p",[s("strong",[t._v("ranges")]),t._v(": 为每个节点添加一个范围属性:"),s("code",[t._v("[node.start, node.end]")])]),t._v(" "),s("p",[s("strong",[t._v("tokens")]),t._v(":将所有已解析的tokens添加到File节点上的tokens属性")]),t._v(" "),s("h4",{attrs:{id:"output"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#output"}},[t._v("#")]),t._v(" Output")]),t._v(" "),s("p",[t._v("Babel解析器根据Babel AST格式生成AST。它是基于ESTree规范的，有以下偏差:")]),t._v(" "),s("ul",[s("li",[t._v("Literal标记被替换为StringLiteral, NumericLiteral, BigIntLiteral, BooleanLiteral, NullLiteral, RegExpLiteral")]),t._v(" "),s("li",[t._v("属性令牌替换为ObjectProperty和ObjectMethod")]),t._v(" "),s("li",[t._v("MethodDefinition被ClassMethod代替")]),t._v(" "),s("li",[t._v("Program和BlockStatement包含附加的Directive和DirectiveLiteral指令字段")]),t._v(" "),s("li",[t._v("ClassMethod、ObjectProperty和ObjectMethod值属性在FunctionExpression中的属性被强制/带入主方法节点。")]),t._v(" "),s("li",[t._v("ChainExpression被替换为OptionalMemberExpression和optionalcallexexpression")]),t._v(" "),s("li",[t._v("ImportExpression被替换为callexexpression，其被调用者是一个Import节点。")])]),t._v(" "),s("blockquote",[s("p",[t._v("现在有一个estree插件可以恢复这些偏差")])]),t._v(" "),s("p",[t._v("AST for JSX的代码是基于Facebook的JSX AST。")]),t._v(" "),s("h2",{attrs:{id:"babel-core"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-core"}},[t._v("#")]),t._v(" @babel/core")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" babel "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/core"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" transform "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/core"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" babel "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/core"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("所有转换都将使用本地配置文件。")]),t._v(" "),s("h3",{attrs:{id:"transform"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transform"}},[t._v("#")]),t._v(" transform")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transform(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object, callback: Function)")])]),t._v(" "),s("p",[t._v("转换已经通过的代码。使用带有生成代码、源映射和AST的对象调用回调函数。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { code, map, ast }")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("blockquote",[s("p",[t._v("兼容注意:\n在Babel 6中，这种方法是同步的，transformSync并不存在。为了向后兼容，如果没有给出回调函数，这个函数将同步运行。如果你从Babel 7开始，需要同步行为，请使用transformSync，因为这个向后兼容性将在Babel 8中被删除。")])]),t._v(" "),s("h3",{attrs:{id:"transformsync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformsync"}},[t._v("#")]),t._v(" transformSync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformSync(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("转换已经通过的代码。返回一个带有生成的代码、源映射和AST的对象。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { code, map, ast }")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformasync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformasync"}},[t._v("#")]),t._v(" transformAsync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformAsync(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Promise<{ code, map, ast }>")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformfile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformfile"}},[t._v("#")]),t._v(" transformFile")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformFile(filename: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object, callback: Function)")])]),t._v(" "),s("p",[t._v("异步转换文件的全部内容。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFile")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"filename.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { code, map, ast }")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformfilesync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformfilesync"}},[t._v("#")]),t._v(" transformFileSync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformFileSync(filename: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("babel.transformFile的同步版本。返回已转换的文件名内容。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFileSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => { code, map, ast }")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformfileasync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformfileasync"}},[t._v("#")]),t._v(" transformFileAsync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformFileAsync(filename: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("babel.transformFile的Promise版本。为文件名的转换内容返回一个Promise")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFileAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// => Promise<{ code, map, ast }>")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformfromast"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformfromast"}},[t._v("#")]),t._v(" transformFromAst")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformFromAst(ast: Object, code?: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object, callback: Function): FileNode | null")])]),t._v(" "),s("p",[t._v("给定一个AST，转换它。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sourceCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"if (true) return;"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsedAst "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseSync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sourceCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  parserOpts"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" allowReturnOutsideFunction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbabel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAst")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsedAst"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"transformfromastasync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transformfromastasync"}},[t._v("#")]),t._v(" transformFromAstAsync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.transformFromAstAsync(ast: Object, code?: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" sourceCode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"if (true) return;"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nbabel\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sourceCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" parserOpts"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" allowReturnOutsideFunction"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("parsedAst")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" babel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAstAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parsedAst"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sourceCode"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h3",{attrs:{id:"parse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parse"}},[t._v("#")]),t._v(" parse")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.parse(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object, callback: Function)")])]),t._v(" "),s("p",[t._v("给定一些代码，使用Babel的标准行为解析它。引用的预设和插件将被加载，这样可选的语法插件将被自动启用。")]),t._v(" "),s("blockquote",[s("p",[t._v("兼容注意:\n在Babel 7的早期测试版中，这种方法是同步的，parseSync并不存在。为了向后兼容，如果没有给出回调函数，这个函数将同步运行。如果你从Babel 7开始，需要同步行为，请使用parseSync，因为这种向后兼容性将在Babel 8中被删除。")])]),t._v(" "),s("h3",{attrs:{id:"parsesync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parsesync"}},[t._v("#")]),t._v(" parseSync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.parseSync(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("返回一个AST。\n给定一些代码，使用Babel的标准行为解析它。引用的预设和插件将被加载，这样可选的语法插件将被自动启用。")]),t._v(" "),s("h3",{attrs:{id:"parseasync"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#parseasync"}},[t._v("#")]),t._v(" parseAsync")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.parseAsync(code: string, "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("Returns a promise for an AST.")]),t._v(" "),s("h3",{attrs:{id:"advanced-apis"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#advanced-apis"}},[t._v("#")]),t._v(" Advanced APIs")]),t._v(" "),s("p",[t._v("许多包了Babel的系统喜欢自动注入插件和预设，或覆盖选项。为了实现这个目标，Babel公开了几个功能，这些功能可以在不进行转换的情况下部分地加载配置。")]),t._v(" "),s("h4",{attrs:{id:"loadoptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loadoptions"}},[t._v("#")]),t._v(" loadOptions")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.loadOptions("),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object)")])]),t._v(" "),s("p",[t._v("完全解决Babel的选项，产生一个options对象:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("opts.plugins")]),t._v("是Plugin实例的完整列表。")]),t._v(" "),s("li",[s("code",[t._v("opts.presets")]),t._v("是空的，所有预设都被压平成选项。")]),t._v(" "),s("li",[t._v("可以安全地传递回Babel。像“babelrc”这样的字段被设置为false，以便以后调用Babel时不会再次尝试加载配置文件。")])]),t._v(" "),s("p",[t._v("Plugin实例并不意味着要被直接操作，但调用者通常会将这个opts序列化到JSON，以使用它作为缓存键，表示Babel收到的选项。在此缓存不能100%保证正确地失效，但这是目前我们最好的。")]),t._v(" "),s("h4",{attrs:{id:"loadpartialconfig"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loadpartialconfig"}},[t._v("#")]),t._v(" loadPartialConfig")]),t._v(" "),s("blockquote",[s("p",[t._v("babel.loadPartialConfig("),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-core#options",target:"_blank",rel:"noopener noreferrer"}},[t._v("options?"),s("OutboundLink")],1),t._v(": Object): PartialConfig")])]),t._v(" "),s("p",[t._v("为了让系统方便地操作和验证用户的配置，该函数解析插件和预设，不再继续。期望的是，调用者将接受配置.options，按照他们认为合适的方式操纵它，然后再传给Babel。")]),t._v(" "),s("p",[t._v("除了标准选项外，这个函数还接受一个附加选项作为选项对象的一部分:showIgnoredFiles。当设置为true时，loadPartialConfig在忽略文件时总是返回一个结果，而不是null。这对于允许调用者访问影响此结果的文件列表非常有用，例如对于监视模式。调用者可以根据返回的fileHandling属性确定文件是否被忽略。")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("babelrc: string | void")]),t._v(" - 文件相关配置文件的路径(如果有的话)。")]),t._v(" "),s("li",[s("code",[t._v("babelignore: string | void")]),t._v(" - babelignore文件的路径(如果有的话)。")]),t._v(" "),s("li",[s("code",[t._v("config: string | void")]),t._v(" - 项目范围的配置文件文件的路径(如果有的话)。")]),t._v(" "),s("li",[s("code",[t._v("options: ValidatedOptions")]),t._v(" - 部分解决的选项，可以操纵并再次传递回Babel。\n"),s("ul",[s("li",[s("code",[t._v("plugins: Array<ConfigItem>")]),t._v(" - 见下文")]),t._v(" "),s("li",[s("code",[t._v("presets: Array<ConfigItem>")]),t._v(" - 见下文")]),t._v(" "),s("li",[t._v("可以安全地返回Babel。像“babelrc”这样的选项被设置为false，以便以后调用Babel时不会再次尝试加载配置文件。")])])]),t._v(" "),s("li",[s("code",[t._v("hasFilesystemConfig(): boolean")]),t._v(" - 检查已解析的配置是否从文件系统加载了任何设置。")]),t._v(" "),s("li",[s("code",[t._v("fileHandling")]),t._v(" - 它被设置为“transpile”、“ignored”或“unsupported”来指示调用者该如何处理这个文件。")]),t._v(" "),s("li",[s("code",[t._v("files")]),t._v(" - 一个文件路径Set，用于构建结果，包括项目范围的配置文件、本地配置文件、扩展配置文件、忽略文件等。用于实现监视模式或缓存失效。")])]),t._v(" "),s("p",[t._v("ConfigItem实例公开属性以内省值，但每个项都应视为不可变的。如果需要进行更改，则应该从列表中删除该项，并用普通的Babel配置值或由Babel . createconfigitem创建的替换项替换。有关ConfigItem字段的信息，请参见该函数。")]),t._v(" "),s("h4",{attrs:{id:"createconfigitem"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createconfigitem"}},[t._v("#")]),t._v(" createConfigItem")]),t._v(" "),s("blockquote",[s("p",[t._v('babel.createConfigItem(value: string | {} | Function | [string | {} | Function, {} | void], { dirname?: string, type?: "preset" | "plugin" }): ConfigItem')])]),t._v(" "),s("p",[t._v("允许构建工具预先创建和缓存配置项。如果这个函数在一个给定的插件中被多次调用，Babel就会多次调用插件本身的函数。如果您有一组清晰的预期插件和要注入的预设，那么建议预先构造配置项。")]),t._v(" "),s("h2",{attrs:{id:"babel-generator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-generator"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/generator"),s("OutboundLink")],1)]),t._v(" "),s("blockquote",[s("p",[t._v("将AST转换为代码。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" parse "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/parser"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" generate "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/generator"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"class Example {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" output "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("generate")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* options */")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  code\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"babel-code-frame"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-code-frame"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-code-frame",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/code-frame"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("设置代码结构")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" codeFrameColumns "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/code-frame"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" rawLines "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('class Foo {\n  constructor() {\n    console.log("hello");\n  }\n}')]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" location "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  start"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" line"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("17")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  end"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" line"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" column"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" result "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("codeFrameColumns")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rawLines"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" location"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* options */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("result"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Foo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("     console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"babel-runtime"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-runtime"}},[t._v("#")]),t._v(" @babel/runtime")]),t._v(" "),s("p",[t._v("@babel/runtime是一个包含babel模块化运行时helpers和一个版本的"),s("code",[t._v("regenerator-runtime")]),t._v("(再生器运行时)。")]),t._v(" "),s("h3",{attrs:{id:"安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save @babel/runtime\n")])])]),s("blockquote",[s("p",[t._v("另请参见："),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-runtime-corejs2",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@babel/runtime-corejs2")]),s("OutboundLink")],1),t._v(".。")])]),t._v(" "),s("h3",{attrs:{id:"使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("p",[t._v("这意味着将与Babel plugin "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-plugin-transform-runtime",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("@babel/plugin-transform-runtime")]),s("OutboundLink")],1),t._v("一起用作运行时依赖项。请查阅该软件包中的文档以供使用。")]),t._v(" "),s("h3",{attrs:{id:"为什么"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么"}},[t._v("#")]),t._v(" 为什么")]),t._v(" "),s("p",[t._v("有时Babel可能会在输出中注入一些跨文件相同的代码，因此可能会被重用。")]),t._v(" "),s("p",[t._v("例如，使用类转换（无松散模式）：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Circle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("转换成")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Circle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Circle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Circle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("这意味着每个包含类的文件每次都会重复使用_classCallCheck 函数。")]),t._v(" "),s("p",[t._v("对于@babel/plugin transform runtime，它将替换对@babel/runtime版本的函数引用。")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" _classCallCheck "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/runtime/helpers/classCallCheck"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("Circle")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Circle")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("_classCallCheck")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Circle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("@babel/runtime包中的函数实现是模块化的。")]),t._v(" "),s("h2",{attrs:{id:"babel-template"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-template"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-template",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/template"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("在计算机科学中，这被称为准引号的实现。")]),t._v(" "),s("h3",{attrs:{id:"字符串的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符串的使用"}},[t._v("#")]),t._v(" 字符串的使用")]),t._v(" "),s("p",[t._v("当使用带字符串参数的函数调用template时，可以提供占位符，当使用模板时，占位符将被替换。")]),t._v(" "),s("p",[t._v("你可以使用两种不同的占位符:语法占位符(例如%%name%%)或标识符占位符(例如name)。@babel/template默认支持这两种方法，但不能混合使用。如果需要明确所使用的语法，可以使用syntacticplaceholder选项。")]),t._v(" "),s("p",[t._v("请注意，在Babel 7.4.0中引入了语法占位符。如果你不能控制@babel/template版本(例如，从@babel/core@^7.0.0对等依赖中导入它)，你必须使用标识符占位符。另一方面，语法占位符有一些优点:它们可以用于标识符可能是一个语法错误的地方(例如，替换函数体，或在导出声明中)，而且它们不会与大写变量冲突(例如，new URL())。")]),t._v(" "),s("h2",{attrs:{id:"babel-traverse"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-traverse"}},[t._v("#")]),t._v(" @babel/traverse")]),t._v(" "),s("h3",{attrs:{id:"安装-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-2"}},[t._v("#")]),t._v(" 安装")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("$ npm install --save @babel/traverse\n")])])]),s("h3",{attrs:{id:"使用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-2"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),s("p",[t._v("我们可以使用它与babel解析器一起遍历和更新节点：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" parser "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/parser"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" traverse "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@babel/traverse"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("function square(n) {\n  return n * n;\n}")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isIdentifier")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"n"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("此外，我们可以针对语法树中的特定"),s("a",{attrs:{href:"https://babeljs.io/docs/en/babel-types#api",target:"_blank",rel:"noopener noreferrer"}},[t._v("节点类型"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("FunctionDeclaration")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n             path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"x"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"babel-types"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#babel-types"}},[t._v("#")]),t._v(" "),s("a",{attrs:{href:"https://www.babeljs.cn/docs/babel-types",target:"_blank",rel:"noopener noreferrer"}},[t._v("@babel/types"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("此模块包含用于手动构建AST和检查AST节点类型的方法。")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("npm install --save-dev @babel/types\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);